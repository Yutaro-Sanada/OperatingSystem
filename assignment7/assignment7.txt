まずそれぞれのスレッドに行番号を振る。

1個目のスレッドを
1, while(lock);
2, lock = true;
3, critical section
4, lock = false;

2個目のスレッドを
5, while(lock);
6, lock = true;
7, critical section
8, lock = false;

とする。

1個目のスレッドからスタートする。
まず、1,を実行する。

その後スレッドが1個目から2個目切り替わったとする。
2個目のスレッドで5, 6, が実行されたとする。
lockの初期値はfalseなので、2個目のスレッドでlockがtrueに変更された。

その後またスレッドが2個目から1個目に切り替わったとする。
1個目のスレッドでは2, 3, が実行されたとする。
つまり、ここでcritical sectionが実行されたことになる。

ここでスレッドが1個目から2個目切り替わったとする。
2個目のスレッドで7, 8, が実行されたとする。
ここでもcritical sectionが実行されてしまう。
つまり、2回critical sectionが実行されたことになる。

最後に、スレッドが2個目から1個目に切り替わったとする。
1個目のスレッドでは4, が実行されたとする。
lock がfalseに変更された。

以上の順番で実行されると、critical sectionが2回実行されたことになる。